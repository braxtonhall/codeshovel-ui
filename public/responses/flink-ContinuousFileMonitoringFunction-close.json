{
	"repo": "https://github.com/apache/flink.git",
	"file": "flink-streaming-java/src/main/java/org/apache/flink/streaming/api/functions/source/ContinuousFileMonitoringFunction.java",
	"method": {
		"longName": "ContinuousFileMonitoringFunction::close()",
		"startLine": 341,
		"methodName": "close",
		"isStatic": false,
		"isAbstract": false,
		"visibility": "public"
	},
	"history": {
		"819fe2083d930b25a21dbaf1897ba9f43616fe9d": {
			"type": "Ybodychange",
			"commitMessage": "[FLINK-7674] Fix NullPointerException in ContinuousFileMonitoringFunction#close\n\nThis closes #4711.\n",
			"commitDate": "2017-09-28, 6:56 AM",
			"commitName": "819fe2083d930b25a21dbaf1897ba9f43616fe9d",
			"commitAuthor": "Bowen Li",
			"commitDateOld": "2017-08-24, 12:17 PM",
			"commitNameOld": "6642768ad8f8c5d1856742a6d148f7724c20666c",
			"commitAuthorOld": "Stefan Richter",
			"daysBetweenCommits": 34.78,
			"commitsBetweenForRepo": 165,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,11 +1,14 @@\n \tpublic void close() throws Exception {\n \t\tsuper.close();\n-\t\tsynchronized (checkpointLock) {\n-\t\t\tglobalModificationTime = Long.MAX_VALUE;\n-\t\t\tisRunning = false;\n+\n+\t\tif (checkpointLock != null) {\n+\t\t\tsynchronized (checkpointLock) {\n+\t\t\t\tglobalModificationTime = Long.MAX_VALUE;\n+\t\t\t\tisRunning = false;\n+\t\t\t}\n \t\t}\n \n \t\tif (LOG.isDebugEnabled()) {\n \t\t\tLOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n \t\t}\n \t}\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"b410c393c960f55c09fadd4f22732d06f801b938": {
			"type": "Ybodychange",
			"commitMessage": "[FLINK-4800] Introduce the TimestampedFileInputSplit for Continuous File Processing\n\nThis commit mainly introduces the TimestampedFileInputSplit,\nwhich extends the class FileInputSplit and also contains:\ni) the modification time of the file it belongs to and also, and\nii) when checkpointing, the point the reader is currently reading\n    from in the split the reader.\n\nThis will be useful for rescaling. With this addition, the\nContinuousFileMonitoringFunction sends TimestampedFileInputSplit\nto the Readers, and the Readers' state now contain only\nTimestampedFileInputSplit.\n\nIn addition, it refactors the code of the ContinuousFileMonitoringFunction\nand that of the ContinuousFileReaderOperator along with the related\ntests.\n\nThis closes #2618.\n",
			"commitDate": "2016-10-27, 6:22 AM",
			"commitName": "b410c393c960f55c09fadd4f22732d06f801b938",
			"commitAuthor": "kl0u",
			"commitDateOld": "2016-10-10, 2:49 AM",
			"commitNameOld": "b949d42d9f16fe52126f03a960fdf23ad71e6e63",
			"commitAuthorOld": "Maximilian Michels",
			"daysBetweenCommits": 17.15,
			"commitsBetweenForRepo": 108,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,8 +1,11 @@\n \tpublic void close() throws Exception {\n \t\tsuper.close();\n \t\tsynchronized (checkpointLock) {\n \t\t\tglobalModificationTime = Long.MAX_VALUE;\n \t\t\tisRunning = false;\n \t\t}\n-\t\tLOG.info(\"Closed File Monitoring Source.\");\n+\n+\t\tif (LOG.isDebugEnabled()) {\n+\t\t\tLOG.debug(\"Closed File Monitoring Source for path: \" + path + \".\");\n+\t\t}\n \t}\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"bd273a8f435b222eb67840fb39b854ec9ef8602f": {
			"type": "Ybodychange",
			"commitMessage": "[FLINK-4075] Fix unstable ContinuousFileProcessingCheckpointITCase\n",
			"commitDate": "2016-06-30, 6:46 AM",
			"commitName": "bd273a8f435b222eb67840fb39b854ec9ef8602f",
			"commitAuthor": "kl0u",
			"commitDateOld": "2016-06-14, 10:11 AM",
			"commitNameOld": "d353895ba512a5e30fb08a25643fd93f085e8456",
			"commitAuthorOld": "kl0u",
			"daysBetweenCommits": 15.86,
			"commitsBetweenForRepo": 93,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,5 +1,8 @@\n \tpublic void close() throws Exception {\n \t\tsuper.close();\n-\t\tisRunning = false;\n+\t\tsynchronized (checkpointLock) {\n+\t\t\tglobalModificationTime = Long.MAX_VALUE;\n+\t\t\tisRunning = false;\n+\t\t}\n \t\tLOG.info(\"Closed File Monitoring Source.\");\n \t}\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"d353895ba512a5e30fb08a25643fd93f085e8456": {
			"type": "Yintroduced",
			"commitMessage": "[FLINK-2314] Make Streaming File Sources Persistent\n\nThis commit is a combination of several commits/changes. It combines\nchanges to the file input formats and the streaming file read operator\nand integrates them into the API.\n\nThese are the messages of the other two commits:\n\n[FLINK-3717] Make FileInputFormat checkpointable\n\nThis adds a new interface called CheckpointableInputFormat\nwhich describes input formats whose state is queryable,\ni.e. getCurrentState() returns where the reader is\nin the underlying source, and they can resume reading from\na user-specified position.\n\nThis functionality is not yet leveraged by current readers.\n\n[FLINK-3889] Refactor File Monitoring Source\n\nThis is meant to replace the different file\nreading sources in Flink streaming. Now there is\none monitoring source with DOP 1 monitoring a\ndirectory and assigning input split to downstream\nreaders.\n\nIn addition, it makes the new features added by\nFLINK-3717 work together with the aforementioned entities\n(the monitor and the readers) in order to have\nfault tolerant file sources and exactly once guarantees.\n\nThis does not replace the old API calls. This\nwill be done in a future commit.\n",
			"commitDate": "2016-06-14, 10:11 AM",
			"commitName": "d353895ba512a5e30fb08a25643fd93f085e8456",
			"commitAuthor": "kl0u"
		}
	},
	"sha": "9e936a5f8198b0059e9b5fba33163c2bbe3efbdd"
}