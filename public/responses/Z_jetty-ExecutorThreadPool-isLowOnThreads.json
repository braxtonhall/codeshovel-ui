{
	"repo": "https://github.com/eclipse/jetty.project.git",
	"file": "jetty-util/src/main/java/org/eclipse/jetty/util/thread/ExecutorThreadPool.java",
	"method": {
		"longName": "public boolean isLowOnThreads();",
		"startLine": 264,
		"methodName": "isLowOnThreads",
		"isStatic": false,
		"isAbstract": false,
		"visibility": "public"
	},
	"history": {
		"a272fb6e391e126bbdd851bccfc6bde25870570e": {
			"type": "Ybodychange",
			"commitMessage": "Improve executorSizedThreadPool (#2253)\n\nImprove executorSizedThreadPool (#2253)\r\n\r\n* Improve executorSizedThreadPool\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Improved implementation.\r\n\r\nImplemented name, thread priorities, thread group and daemon properties.\r\nImplemented toString(), dump() and using a thread factory.\r\n\r\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>\r\n\r\n* added threadpool benchmark;\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n\r\n* Renamed ExecutorSizedThreadPool to ExecutorThreadPool\r\n\r\nSigned-off-by: Greg Wilkins <gregw@webtide.com>\r\n",
			"commitDate": "2018-03-06, 12:07 AM",
			"commitName": "a272fb6e391e126bbdd851bccfc6bde25870570e",
			"commitAuthor": "Greg Wilkins",
			"commitDateOld": "2018-02-28, 6:59 PM",
			"commitNameOld": "a639ee9275e672ca21320f56f62f1648d24aa140",
			"commitAuthorOld": "Lachlan Roberts",
			"daysBetweenCommits": 5.21,
			"commitsBetweenForRepo": 18,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,11 +1,4 @@\n     public boolean isLowOnThreads()\n     {\n-        if (_executor instanceof ThreadPoolExecutor)\n-        {\n-            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;\n-            // getActiveCount() locks the thread pool, so execute it last\n-            return tpe.getPoolSize() == tpe.getMaximumPoolSize() &&\n-                    tpe.getQueue().size() >= tpe.getPoolSize() - tpe.getActiveCount();\n-        }\n-        return false;\n+        return getThreads() == getMaxThreads() && _executor.getQueue().size() >= getIdleThreads();\n     }\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"810223e2591471d4cba024e30349fe9c9db961e2": {
			"type": "Ybodychange",
			"commitMessage": "361655 ExecutorThreadPool.isLowOnThreads() returns wrong value.\n\nOptimized by calling getActiveCount() last, since it locks the thread pool.\n",
			"commitDate": "2011-10-21, 1:53 PM",
			"commitName": "810223e2591471d4cba024e30349fe9c9db961e2",
			"commitAuthor": "Simone Bordet",
			"commitDateOld": "2011-10-21, 7:25 AM",
			"commitNameOld": "309e347d18f1fc2eaee10e83e996c947b3a66ff7",
			"commitAuthorOld": "Simone Bordet",
			"daysBetweenCommits": 0.27,
			"commitsBetweenForRepo": 1,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,10 +1,11 @@\n     public boolean isLowOnThreads()\n     {\n         if (_executor instanceof ThreadPoolExecutor)\n         {\n             final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;\n-            int idleThreads = tpe.getPoolSize() - tpe.getActiveCount();\n-            return tpe.getPoolSize() == tpe.getMaximumPoolSize() && tpe.getQueue().size() >= idleThreads;\n+            // getActiveCount() locks the thread pool, so execute it last\n+            return tpe.getPoolSize() == tpe.getMaximumPoolSize() &&\n+                    tpe.getQueue().size() >= tpe.getPoolSize() - tpe.getActiveCount();\n         }\n         return false;\n     }\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"309e347d18f1fc2eaee10e83e996c947b3a66ff7": {
			"type": "Ybodychange",
			"commitMessage": "361655 ExecutorThreadPool.isLowOnThreads() returns wrong value.\n\nMethod isLowOnThreads() now return a value similar to what QueuedThreadPool does.\nAlso taken the chance to refactor constructors, and clarify that if an unbounded queue\nlike LinkedBlockingQueue is used, then the corePoolSize must be equal to the maxPoolSize.\n",
			"commitDate": "2011-10-21, 7:25 AM",
			"commitName": "309e347d18f1fc2eaee10e83e996c947b3a66ff7",
			"commitAuthor": "Simone Bordet",
			"commitDateOld": "2011-08-24, 10:22 AM",
			"commitNameOld": "396bb04b863b9cd74ef3fc13cfa8128f5cfd6690",
			"commitAuthorOld": "Joakim Erdfelt",
			"daysBetweenCommits": 57.88,
			"commitsBetweenForRepo": 284,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,9 +1,10 @@\n     public boolean isLowOnThreads()\n     {\n         if (_executor instanceof ThreadPoolExecutor)\n         {\n-            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;            \n-            return tpe.getTaskCount()>=(tpe.getMaximumPoolSize());\n+            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;\n+            int idleThreads = tpe.getPoolSize() - tpe.getActiveCount();\n+            return tpe.getPoolSize() == tpe.getMaximumPoolSize() && tpe.getQueue().size() >= idleThreads;\n         }\n         return false;\n     }\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"748eadeda349ab2fb1b2f45950c061425b126983": {
			"type": "Ybodychange",
			"commitMessage": "331230 Fixed low thread warnings when acceptors>threadpool\n\ngit-svn-id: svn+ssh://dev.eclipse.org/svnroot/rt/org.eclipse.jetty/jetty/trunk@2564 7e9141cc-0065-0410-87d8-b60c137991c4\n",
			"commitDate": "2010-12-01, 5:08 AM",
			"commitName": "748eadeda349ab2fb1b2f45950c061425b126983",
			"commitAuthor": "Greg Wilkins",
			"commitDateOld": "2010-04-29, 4:03 PM",
			"commitNameOld": "b7b067e7f3cc5c054560ff782d6e49bb81947137",
			"commitAuthorOld": "Joakim Erdfelt",
			"daysBetweenCommits": 215.59,
			"commitsBetweenForRepo": 565,
			"commitsBetweenForFile": 1,
			"diff": "@@ -1,9 +1,9 @@\n     public boolean isLowOnThreads()\n     {\n         if (_executor instanceof ThreadPoolExecutor)\n         {\n-            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;\n-            return tpe.getActiveCount()>=tpe.getMaximumPoolSize();\n+            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;            \n+            return tpe.getTaskCount()>=(tpe.getMaximumPoolSize());\n         }\n         return false;\n     }\n\\ No newline at end of file\n",
			"extendedDetails": {}
		},
		"da627b843fe81fa0fe52a046c1be8595630e9ae7": {
			"type": "Yintroduced",
			"commitMessage": "jetty @ eclipse initial commit\n\ngit-svn-id: svn+ssh://dev.eclipse.org/svnroot/rt/org.eclipse.jetty/jetty/trunk@8 7e9141cc-0065-0410-87d8-b60c137991c4\n",
			"commitDate": "2009-03-24, 2:07 PM",
			"commitName": "da627b843fe81fa0fe52a046c1be8595630e9ae7",
			"commitAuthor": "Greg Wilkins",
			"diff": "@@ -0,0 +1,9 @@\n+    public boolean isLowOnThreads()\n+    {\n+        if (_executor instanceof ThreadPoolExecutor)\n+        {\n+            final ThreadPoolExecutor tpe = (ThreadPoolExecutor)_executor;\n+            return tpe.getActiveCount()>=tpe.getMaximumPoolSize();\n+        }\n+        return false;\n+    }\n\\ No newline at end of file\n"
		}
	},
	"sha": "fc5dd874f3deda71e6cd42af994a5af5cb6be4af"
}